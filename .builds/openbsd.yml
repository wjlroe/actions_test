image: openbsd/6.8
sources:
  - https://git.sr.ht/~willroe/darcs_build
packages:
  - ghc
  - cabal-install
environment:
  DARCS_VERSION: 2.16.2
tasks:
  - build: |
      curl https://hackage.haskell.org/package/darcs-$DARCS_VERSION/darcs-$DARCS_VERSION.tar.gz -o darcs-$DARCS_VERSION.tar.gz
      tar xvzf darcs-$DARCS_VERSION.tar.gz
      cd darcs-$DARCS_VERSION
      cabal v2-update
      cabal v2-build
artifacts:
  - darcs-$DARCS_VERSION/dist-newstyle/build/x86_64-openbsd/ghc-8.6.4/darcs-$DARCS_VERSION/build/darcs/darcs
